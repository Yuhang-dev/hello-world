{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { TYPE } from './utils/dict';\nimport { getTicket as _getTicket } from '@/api/ticket';\nexport default {\n  data: function data() {\n    return {\n      TYPE: TYPE,\n      tableData: [],\n      //分页对象\n      pageData: {\n        currentPage: 1,\n        //当前的页面\n        pageSize: 1,\n        //，每页有几条\n        total: 0 //总数\n\n      }\n    };\n  },\n  created: function created() {\n    this.getTicket(this.pageData.currentPage, this.pageData.pageSize);\n  },\n  methods: {\n    handleSizeChange: function handleSizeChange(pageSize) {\n      console.log(pageSize); //每页条数发生变化触发\n\n      this.getTicket(this.pageData.currentPage, pageSize);\n    },\n    handleCurrentChange: function handleCurrentChange(currentPage) {\n      //当前页码发生变化触发\n      this.getTicket(currentPage, this.pageData.pageSize);\n    },\n    getTicket: function getTicket(currentPage, pageSize) {\n      var _this = this;\n\n      _getTicket({\n        currentPage: currentPage,\n        pageSize: pageSize\n      }).then(function (res) {\n        var data = res.data.data;\n        _this.tableData = data.table;\n        _this.pageData.total = data.total;\n        _this.pageData.currentPage = currentPage;\n        _this.pageData.pageSize = pageSize;\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AAEA;EACAA,IADA,kBACA;IACA;MACAC,UADA;MAGAC,aAHA;MAKA;MACAC;QACAC,cADA;QACA;QACAC,WAFA;QAEA;QACAC,QAHA,CAGA;;MAHA;IANA;EAYA,CAdA;EAeAC,OAfA,qBAeA;IACA;EACA,CAjBA;EAkBAC;IACAC,gBADA,4BACAJ,QADA,EACA;MACAK,sBADA,CAEA;;MACA;IACA,CALA;IAMAC,mBANA,+BAMAP,WANA,EAMA;MACA;MACA;IACA,CATA;IAUAQ,SAVA,qBAUAR,WAVA,EAUAC,QAVA,EAUA;MAAA;;MACAO;QACAR,wBADA;QAEAC;MAFA,GAGAQ,IAHA,CAGA;QACA;QACA;QACA;QACA;QACA;MACA,CATA;IAUA;EArBA;AAlBA","names":["data","TYPE","tableData","pageData","currentPage","pageSize","total","created","methods","handleSizeChange","console","handleCurrentChange","getTicket","then"],"sourceRoot":"src/views/tickets","sources":["list.vue"],"sourcesContent":["<template>\r\n  <div class=\"list\">\r\n    <div class=\"list-header\">\r\n      <el-button type=\"primary\" @click=\"$router.push('/tickets/new')\">New Ticket</el-button>\r\n    </div>\r\n\r\n    <el-table\r\n      class=\"list-content\"\r\n      :data=\"tableData\"\r\n      style=\"width: 100%\">\r\n      <el-table-column\r\n        prop=\"id\"\r\n        label=\"ID\"\r\n        width=\"180\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"title\"\r\n        label=\"Summary\"\r\n        width=\"180\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"type\"\r\n        label=\"Type\">\r\n        <template slot-scope=\"scope\">\r\n          {{ TYPE[scope.row.type] }}\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-pagination\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page.sync=\"pageData.currentPage\"\r\n      :page-sizes=\"[1, 2, 3, 4]\"\r\n      :page-size=\"pageData.pageSize\"\r\n      layout=\"sizes, prev, pager, next\"\r\n      :total=\"pageData.total\">\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {TYPE} from './utils/dict';\r\nimport { getTicket } from '@/api/ticket'\r\n\r\nexport default {\r\n  data(){\r\n    return {\r\n      TYPE,\r\n\r\n      tableData: [],\r\n\r\n      //分页对象\r\n      pageData:{\r\n        currentPage: 1, //当前的页面\r\n        pageSize: 1, //，每页有几条\r\n        total: 0 //总数\r\n      }\r\n    }\r\n  },\r\n  created(){\r\n    this.getTicket(this.pageData.currentPage,this.pageData.pageSize)\r\n  },\r\n  methods: {\r\n    handleSizeChange(pageSize){\r\n      console.log(pageSize)\r\n      //每页条数发生变化触发\r\n      this.getTicket(this.pageData.currentPage, pageSize)\r\n    },\r\n    handleCurrentChange(currentPage){\r\n      //当前页码发生变化触发\r\n      this.getTicket(currentPage,this.pageData.pageSize)\r\n    },\r\n    getTicket(currentPage, pageSize){\r\n      getTicket({\r\n        currentPage,\r\n        pageSize,\r\n      }).then(res =>{\r\n        let data = res.data.data;\r\n        this.tableData = data.table;\r\n        this.pageData.total = data.total;\r\n        this.pageData.currentPage = currentPage;\r\n        this.pageData.pageSize = pageSize;\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep.list{\r\n  box-sizing: border-box;\r\n  padding: 14px;\r\n  width: 1200px;\r\n  margin: 15px auto 0;\r\n  background: #fff;\r\n  border: 1px solid rgba(0,0,0,0.15);\r\n  .list-header{\r\n    text-align: right;\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}