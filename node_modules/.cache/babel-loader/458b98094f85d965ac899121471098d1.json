{"ast":null,"code":"import _defineProperty from \"D:/\\u8BA1\\u91CF\\u5B9E\\u8BAD/2021/\\u7EC3\\u4E60/hello-world/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.json.stringify.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { TYPE } from './utils/dict';\nimport { postTicket } from '@/api/ticket';\nexport default {\n  data: function data() {\n    //标题的规则\n    var titleRules = function titleRules(rule, value, callback) {\n      //rule 当前字段的规则信息\n      //value 当前字段的值\n      //callabck效验回调\n      //标题只允许输入空格中文 英文 + - * ! ！。. ，,\n      var reg = /^[\\u4e00-\\u9fa5a-zA-Z+\\-\\*\\!\\.\\,！。，\\s]+$/;\n\n      if (value.trim() === '') {\n        return callback(new Error('不能为空！'));\n      } else if (!reg.test(value)) {\n        return callback(new Error('标题只允许输入中文 英文 + - * ! ！。. ，,'));\n      }\n    };\n\n    var snRules = function snRules(rule, value, callback) {//如果sn写； 必须是8个或10个长度的数字\n    };\n\n    return {\n      TYPE: TYPE,\n      formData: {\n        title: '',\n        type: '',\n        severity: '',\n        reasonForUrgency: '',\n        expectedSolveDate: '',\n        sn: '',\n        assignee: 'Adminnnn',\n        copiedAuto: 'Adminnnn',\n        copiedManual: [],\n        description: ''\n      },\n      rules: {\n        title: [//标题只允许输入中文 英文 + - * ! ！。. ，,\n        {\n          required: true,\n          validator: titleRules,\n          trigger: ['change']\n        }, {\n          max: 40,\n          message: '字符最多40个',\n          trigger: ['change']\n        }],\n        type: [{\n          required: true,\n          message: '不能为空',\n          trigger: ['change']\n        }],\n        severity: [{\n          required: true,\n          message: '不能为空',\n          trigger: ['change']\n        }],\n        sn: [{\n          validator: snRules,\n          trigger: ['change']\n        }],\n        reasonForUrgency: [{\n          required: true,\n          message: '不能为空',\n          trigger: ['change']\n        }, {\n          max: 40,\n          message: '字符最多40个',\n          trigger: ['change']\n        }],\n        expectedSolveDate: [{\n          required: true,\n          message: '不能为空',\n          trigger: ['change']\n        }],\n        copiedAuto: [{\n          required: true,\n          message: '不能为空',\n          trigger: ['change']\n        }],\n        copiedManual: [{\n          required: true,\n          message: '不能为空',\n          trigger: ['change']\n        }],\n        description: [{\n          required: true,\n          message: '不能为空',\n          trigger: ['change']\n        }, {\n          max: 1000000,\n          message: '字符最多40个',\n          trigger: ['change']\n        }]\n      }\n    };\n  },\n  watch: _defineProperty({}, 'formData.description', function formDataDescription(newValue, oldValue) {\n    this.$refs.formNode.validateField('description');\n  }),\n  computed: {\n    //计算属性\n    isUrgency: function isUrgency() {\n      //等价isUrgency: ()=>{}\n      //当formData.severity == '1'时，isUrgency才会是true，其他情况都是false\n      return this.formData.severity == '1';\n    }\n  },\n  methods: {\n    toSubmit: function toSubmit() {\n      var _this = this;\n\n      //提交表单，效验成功后，发送接口\n      this.$refs.formNode.validate(function (valid, obj) {\n        if (valid) {\n          console.log(_this.formData);\n          var copyFormData = JSON.parse(JSON.stringify(_this.formData)); //copy一份json对象\n\n          copyFormData.expectedSolveDate = _this.formData.expectedSolveDate.getTime();\n          postTicket(copyFormData).then(function (res) {\n            var id = res.data.data;\n\n            _this.$router.push(\"/tickets/\".concat(id));\n          }).catch(function (err) {\n            console.log(err);\n          });\n        }\n      });\n    },\n    toCacnel: function toCacnel() {\n      var _this2 = this;\n\n      //返回上一个页面\n      this.$confirm('是否真要取消，返回到列表页?', '提示', {\n        confirmButtonText: 'OK',\n        cancelButtonText: 'Cancel',\n        type: 'warning'\n      }).then(function () {\n        _this2.$router.go(-1); //返回上一个链接\n\n      }).catch(function () {});\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqGA;AACA;AAEA;EACAA,IADA,kBACA;IACA;IACA;MACA;MACA;MACA;MACA;MACA;;MACA;QACA;MACA,CAFA,MAGA;QACA;MACA;IACA,CAZA;;IAcA,uDACA;IAEA,CAHA;;IAKA;MACAC,UADA;MAGAC;QACAC,SADA;QAEAC,QAFA;QAGAC,YAHA;QAIAC,oBAJA;QAKAC,qBALA;QAMAC,MANA;QAOAC,oBAPA;QAQAC,sBARA;QASAC,gBATA;QAUAC;MAVA,CAHA;MAgBAC;QACAV,QACA;QACA;UAAAW;UAAAC;UAAAC;QAAA,CAFA,EAGA;UAAAC;UAAAC;UAAAF;QAAA,CAHA,CADA;QAMAZ,OACA;UAAAU;UAAAI;UAAAF;QAAA,CADA,CANA;QASAX,WACA;UAAAS;UAAAI;UAAAF;QAAA,CADA,CATA;QAYAR,KACA;UAAAO;UAAAC;QAAA,CADA,CAZA;QAeAV,mBACA;UAAAQ;UAAAI;UAAAF;QAAA,CADA,EAEA;UAAAC;UAAAC;UAAAF;QAAA,CAFA,CAfA;QAmBAT,oBACA;UAAAO;UAAAI;UAAAF;QAAA,CADA,CAnBA;QAsBAN,aACA;UAAAI;UAAAI;UAAAF;QAAA,CADA,CAtBA;QAyBAL,eACA;UAAAG;UAAAI;UAAAF;QAAA,CADA,CAzBA;QA4BAJ,cACA;UAAAE;UAAAI;UAAAF;QAAA,CADA,EAEA;UAAAC;UAAAC;UAAAF;QAAA,CAFA;MA5BA;IAhBA;EAkDA,CAxEA;EAyEAG,2BAEA,sBAFA,+BAEAC,QAFA,EAEAC,QAFA,EAEA;IACA;EACA,CAJA,CAzEA;EA+EAC;IACA;IACAC,SAFA,uBAEA;MAAA;MACA;MACA;IACA;EALA,CA/EA;EAsFAC;IACAC,QADA,sBACA;MAAA;;MACA;MACA;QACA;UACAC;UACA,8DAFA,CAEA;;UACAC;UACAC;YACA;;YACA;UACA,CAHA,EAGAC,KAHA,CAGA;YACAH;UACA,CALA;QAMA;MACA,CAZA;IAcA,CAjBA;IAkBAI,QAlBA,sBAkBA;MAAA;;MACA;MACA;QACAC,uBADA;QAEAC,0BAFA;QAGA5B;MAHA,GAIA6B,IAJA,CAIA;QACA,sBADA,CACA;;MACA,CANA,EAMAJ,KANA,CAMA,aAEA,CARA;IASA;EA7BA;AAtFA","names":["data","TYPE","formData","title","type","severity","reasonForUrgency","expectedSolveDate","sn","assignee","copiedAuto","copiedManual","description","rules","required","validator","trigger","max","message","watch","newValue","oldValue","computed","isUrgency","methods","toSubmit","console","copyFormData","postTicket","catch","toCacnel","confirmButtonText","cancelButtonText","then"],"sourceRoot":"src/views/tickets","sources":["new.vue"],"sourcesContent":["<template>\r\n  <div class=\"form-wrap\">\r\n    <div class=\"form\">\r\n      <h3 class=\"form-title\">New Tickets</h3>\r\n      <el-form ref=\"formNode\" label-width=\"290px\" :rules=\"rules\" :model=\"formData\" size=\"small\">\r\n        <el-form-item\r\n          label=\"Summary:\"\r\n          prop=\"title\"\r\n        >\r\n          <el-input class=\"w-744\" type=\"text\" v-model=\"formData.title\" autocomplete=\"off\" size=\"small\" placeholder=\"Enter summary\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"Type:\"\r\n          prop=\"type\"\r\n        >\r\n          <el-select v-model=\"formData.type\" placeholder=\"Select type\" size=\"small\" class=\"w-372\">\r\n            <el-option \r\n            :value=\"item\" \r\n            :label=\"TYPE[item]\" \r\n            v-for=\"item in TYPE\" :key=\"item\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"Severity:\"\r\n          prop=\"severity\"\r\n        >\r\n          <el-select v-model=\"formData.severity\" placeholder=\"Select severity\" size=\"small\" class=\"w-372\">\r\n            <el-option value=\"1\" label=\"Urgency\"></el-option>\r\n            <el-option value=\"2\" label=\"Slight\"></el-option>\r\n            <el-option value=\"3\" label=\"None\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item\r\n          v-if=\"isUrgency\"\r\n          label=\"\"\r\n          prop=\"reasonForUrgency\"\r\n        >\r\n          <el-input class=\"w-744\" type=\"text\" v-model=\"formData.reasonForUrgency\" autocomplete=\"off\" size=\"small\" placeholder=\"Reason For Urgency\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"Expected Solve Date:\"\r\n          prop=\"expectedSolveDate\"\r\n        >\r\n          <el-date-picker\r\n            class=\"w-372 date-picker\"\r\n            v-model=\"formData.expectedSolveDate\"\r\n            type=\"datetime\"\r\n            placeholder=\"Select date\"\r\n            prefix-icon=\"el-icon-date\"\r\n            >\r\n          </el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"SN:\"\r\n          prop=\"sn\"\r\n        >\r\n          <el-input class=\"w-372\" type=\"text\" v-model=\"formData.sn\" autocomplete=\"off\" size=\"small\" placeholder=\"Comma separated terminal SNs\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"Assignee:\"\r\n          prop=\"assignee\"\r\n        >\r\n          Adminnnn\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"Copied:\"\r\n          prop=\"copiedAuto\"\r\n        >\r\n          Adminnnn\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"\"\r\n          prop=\"copiedAuto\"\r\n        >\r\n          <el-select v-model=\"formData.copiedManual\" placeholder=\"Select copied\" size=\"small\" \r\n          multiple\r\n          class=\"w-372\">\r\n            <el-option value=\"1\" label=\"Tom\"></el-option>\r\n            <el-option value=\"2\" label=\"Jack\"></el-option>\r\n            <el-option value=\"3\" label=\"Rick\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"Description:\"\r\n          prop=\"description\"\r\n        >\r\n          <quill-editor class=\"form-quill-editor\" v-model=\"formData.description\">\r\n          </quill-editor>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      \r\n    </div>\r\n    <div class=\"form-btn\">\r\n        <el-button @click=\"toCacnel\">Cancel</el-button>\r\n        <el-button type=\"primary\" @click=\"toSubmit\">Submit</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {TYPE} from './utils/dict'\r\nimport {postTicket} from '@/api/ticket';\r\n \r\nexport default {\r\n    data() {\r\n      //标题的规则\r\n      var titleRules = (rule, value, callback)=>{\r\n        //rule 当前字段的规则信息\r\n        //value 当前字段的值\r\n        //callabck效验回调\r\n        //标题只允许输入空格中文 英文 + - * ! ！。. ，,\r\n        var reg = /^[\\u4e00-\\u9fa5a-zA-Z+\\-\\*\\!\\.\\,！。，\\s]+$/;\r\n        if(value.trim() === ''){\r\n          return callback(new Error('不能为空！'));\r\n        }\r\n        else if(!reg.test(value)){\r\n          return callback(new Error('标题只允许输入中文 英文 + - * ! ！。. ，,'));\r\n        }\r\n      };\r\n\r\n      var snRules = (rule, value, callback)=>{\r\n        //如果sn写； 必须是8个或10个长度的数字\r\n        \r\n      }\r\n\r\n      return {\r\n        TYPE,\r\n\r\n        formData:  { \r\n          title: '', \r\n          type: '', \r\n          severity: '', \r\n          reasonForUrgency: '', \r\n          expectedSolveDate: '', \r\n          sn: '', \r\n          assignee: 'Adminnnn', \r\n          copiedAuto: 'Adminnnn', \r\n          copiedManual: [], \r\n          description: '' \r\n        },\r\n\r\n        rules: {\r\n          title: [\r\n            //标题只允许输入中文 英文 + - * ! ！。. ，,\r\n            { required: true, validator: titleRules, trigger: ['change'] },\r\n            { max: 40, message: '字符最多40个', trigger: ['change'] }\r\n          ],\r\n          type: [\r\n            { required: true, message: '不能为空', trigger: ['change'] }\r\n          ],\r\n          severity: [\r\n            { required: true, message: '不能为空', trigger: ['change'] }\r\n          ],\r\n          sn: [\r\n            { validator: snRules, trigger: ['change'] }\r\n          ],\r\n          reasonForUrgency: [\r\n            { required: true, message: '不能为空', trigger: ['change'] },\r\n            { max: 40, message: '字符最多40个', trigger: ['change'] }\r\n          ],\r\n          expectedSolveDate: [\r\n            { required: true, message: '不能为空', trigger: ['change'] },\r\n          ],\r\n          copiedAuto: [\r\n            { required: true, message: '不能为空', trigger: ['change'] }\r\n          ],\r\n          copiedManual: [\r\n            { required: true, message: '不能为空', trigger: ['change'] }\r\n          ],\r\n          description: [\r\n            { required: true, message: '不能为空', trigger: ['change'] },\r\n            { max: 1000000, message: '字符最多40个', trigger: ['change'] }\r\n          ],\r\n        }\r\n      };\r\n    },\r\n    watch: {\r\n      //监听属性\r\n      ['formData.description'](newValue,oldValue){\r\n        this.$refs.formNode.validateField('description');\r\n      }\r\n    },\r\n    computed: {\r\n      //计算属性\r\n      isUrgency(){//等价isUrgency: ()=>{}\r\n        //当formData.severity == '1'时，isUrgency才会是true，其他情况都是false\r\n        return this.formData.severity == '1';\r\n      }\r\n    },\r\n    methods: {\r\n      toSubmit(){\r\n        //提交表单，效验成功后，发送接口\r\n        this.$refs.formNode.validate((valid,obj)=>{\r\n          if(valid){\r\n            console.log(this.formData)\r\n            let copyFormData = JSON.parse(JSON.stringify(this.formData));//copy一份json对象\r\n            copyFormData.expectedSolveDate = this.formData.expectedSolveDate.getTime();\r\n            postTicket(copyFormData).then(res => {\r\n              var id = res.data.data;\r\n              this.$router.push(`/tickets/${id}`);\r\n            }).catch(err=>{\r\n              console.log(err);\r\n            });\r\n          }\r\n        })\r\n        \r\n      },\r\n      toCacnel(){\r\n        //返回上一个页面\r\n        this.$confirm('是否真要取消，返回到列表页?', '提示', {\r\n          confirmButtonText: 'OK',\r\n          cancelButtonText: 'Cancel',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.$router.go(-1);//返回上一个链接\r\n        }).catch(() => {\r\n                   \r\n        });\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n//::v-deep 属性选择器\r\n.form-wrap{\r\n  width: 1200px;\r\n  margin: 15px auto 0;\r\n  .form-btn{\r\n    text-align: right;\r\n    margin-top: 16px;\r\n  }\r\n}\r\n::v-deep.form{\r\n  box-sizing: border-box;\r\n  width: 1200px;\r\n  background: #FFFFFF;\r\n  border: 1px solid rgba(0,0,0,0.15);\r\n  .form-title{\r\n    margin: 20px 23px 0 30px;\r\n    padding-bottom: 19px;\r\n    font-size: 22px;\r\n    font-weight: normal;\r\n    color: #5A5A5A;\r\n    line-height: 28px;\r\n    border-bottom: 1px solid #D6D6D6;\r\n  }\r\n  .el-form{\r\n    margin-top: 21px;\r\n    .el-form-item__label{\r\n      padding-right: 13px;\r\n      color: #000000;\r\n    }\r\n    .w-744{\r\n      width: 744px;\r\n    }\r\n    .w-372{\r\n      width: 372px;\r\n    }\r\n    .form-quill-editor{\r\n      width: 744px;\r\n      height: 205px;\r\n      .ql-container{\r\n        height: calc(100% - 82px);\r\n      }\r\n    }\r\n    .date-picker{\r\n      .el-input__inner{\r\n        padding-left: 15px;\r\n      }\r\n      .el-input__prefix{\r\n        right: 5px;\r\n        left: auto;\r\n      }\r\n      .el-input__suffix{\r\n          background: #fff;\r\n          height: 30px;\r\n          top: 2px;\r\n          .el-input__suffix-inner{\r\n            transform: translate(0,-1px);\r\n            display: block;\r\n          }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n \r\n</style>"]},"metadata":{},"sourceType":"module"}