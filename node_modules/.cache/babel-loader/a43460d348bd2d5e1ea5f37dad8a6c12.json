{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.number.constructor.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/***扫雷：          格子状态(status):        1.未翻开状态(class=\"\")            \r\n *                                          4.翻开状态( class=\"open\")\r\n * \r\n *               未翻开状态(status)：        1.普通状态（可左键翻开）(class=\"\")   \r\n *                                          2.插旗状态（不可左键翻开）( class=\"open el-icon-s-flag\")    \r\n *                                          3.疑问状态（与普通状态无异，可左键翻开）( class=\"open question\")    \r\n * \r\n *  翻开状态（都不再允许点击）(status)：       4.无任何内容 ( class=\"open\")        \r\n *                                           5.数字状态 ( class=\"open\")       \r\n *                                           6.雷( class=\"open el-icon-sunny\")\r\n * \r\n *      \r\n *                            isBomb:       是否是炸弹格子，默认false          \r\n * \r\n *    {\r\n *       'x,y': { status: 1,  isBomb: false }\r\n *    }\r\n * \r\n * ***/\nexport default {\n  data: function data() {\n    return {\n      width: 28,\n      //格子的宽度\n      sweepData: {},\n      //所有的格子数据对象\n      row: 10,\n      //几行\n      col: 15,\n      //几列\n      count: 10 //雷的数量\n\n    };\n  },\n  created: function created() {\n    this.initGame();\n  },\n  methods: {\n    initGame: function initGame() {\n      var _this = this;\n\n      var coords = []; //记录所有的的坐标值集合[{x,y}]\n      //生成对应格子的数据对象\n\n      for (var y = 0; y < this.row; y++) {\n        for (var x = 0; x < this.col; x++) {\n          coords.push({\n            x: x,\n            y: y\n          });\n          this.$set(this.sweepData, x + ',' + y, {\n            status: 1,\n            isBomb: false\n          });\n        }\n      } //生成随机雷的坐标集合\n\n\n      var bombCoords = this.createBombCoords(this.count, coords); //将雷状态写入到数据中\n\n      bombCoords.forEach(function (item) {\n        var x = item.x;\n        var y = item.y;\n        _this.sweepData[x + ',' + y].isBomb = true;\n      });\n      console.log(this.sweepData);\n    },\n    createBombCoords: function createBombCoords(count, coords) {\n      //生成随机雷的坐标集合\n      var randomCoords = [];\n\n      for (var i = 0; i < count; i++) {\n        var randomPos = Math.floor(coords.length * Math.random());\n        randomCoords.push(coords.splice(randomPos, 1)[0]);\n      }\n\n      return randomCoords;\n    },\n    roundData: function roundData(x, y) {\n      //获取当前x,y周围8个格子的对象集合\n      var arr = [];\n\n      for (var xx = x - 1; xx < x + 1; xx++) {\n        for (var yy = y - 1; yy < y + 1; yy++) {\n          if (xx >= 0 && xx < this.col && yy >= 0 && yy < this.row) {\n            arr.push({\n              x: x,\n              y: y\n            });\n          }\n        }\n      }\n    },\n    clickHandle: function clickHandle(item, strCoords) {\n      //点击格子触发的函数\n      if (item.isBomb) {\n        item.status = 6;\n        this.$alert('踩到雷了，输了！', {\n          confirmButtonText: '确定'\n        });\n        return;\n      } else {\n        //正常未踩到雷\n        var coords = strCoords.split(','); //字符串转为数组\n\n        var x = Number(coords[0]);\n        var y = Number(coords[1]);\n        this.roundData(x, y);\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAA,IADA,kBACA;IACA;MACAC,SADA;MACA;MAEAC,aAHA;MAGA;MAEAC,OALA;MAKA;MACAC,OANA;MAMA;MACAC,SAPA,CAOA;;IAPA;EASA,CAXA;EAYAC,OAZA,qBAYA;IACA;EACA,CAdA;EAeAC;IACAC,QADA,sBACA;MAAA;;MACA,gBADA,CACA;MACA;;MACA;QACA;UACAC;YAAAC;YAAAC;UAAA;UACA;YAAAC;YAAAC;UAAA;QACA;MACA,CARA,CAUA;;;MACA,2DAXA,CAaA;;MACAC;QACA;QACA;QACA;MACA,CAJA;MAMAC;IACA,CAtBA;IAuBAC,gBAvBA,4BAuBAX,KAvBA,EAuBAI,MAvBA,EAuBA;MACA;MACA;;MACA;QACA;QACAQ;MACA;;MAEA;IACA,CAhCA;IAiCAC,SAjCA,qBAiCAR,CAjCA,EAiCAC,CAjCA,EAiCA;MACA;MACA;;MACA;QACA;UACA;YACAQ;cAAAT;cAAAC;YAAA;UACA;QACA;MACA;IACA,CA3CA;IA4CAS,WA5CA,uBA4CAC,IA5CA,EA4CAC,SA5CA,EA4CA;MACA;MACA;QACAD;QACA;UACAE;QADA;QAGA;MACA,CANA,MAOA;QACA;QACA,kCAFA,CAEA;;QACA;QACA;QACA;MACA;IACA;EA5DA;AAfA","names":["data","width","sweepData","row","col","count","created","methods","initGame","coords","x","y","status","isBomb","bombCoords","console","createBombCoords","randomCoords","roundData","arr","clickHandle","item","strCoords","confirmButtonText"],"sourceRoot":"src/views/sweep","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div class=\"sweep\">\r\n      <div class=\"sweep-content\">\r\n          <ul :style=\"{ width: width * col + 'px' }\">\r\n             <li v-for=\"(item, key) in sweepData\" :key=\"key\" @click=\"clickHandle(item,key)\" :class=\"{\r\n                 open: item.status > 1,\r\n                 'el-icon-s-flag': item.status == 2,\r\n                 'question': item.status == 3,\r\n                 'el-icon-sunny': item.status == 6,\r\n             }\">{{key}}</li>\r\n          </ul>\r\n      </div>\r\n      <div class=\"sweep-operator\">\r\n          <span class=\"sweep-count\">{{count}}</span>\r\n          <i class=\"sweep-icon el-icon-sunny\"></i>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/***扫雷：          格子状态(status):        1.未翻开状态(class=\"\")            \r\n *                                          4.翻开状态( class=\"open\")\r\n * \r\n *               未翻开状态(status)：        1.普通状态（可左键翻开）(class=\"\")   \r\n *                                          2.插旗状态（不可左键翻开）( class=\"open el-icon-s-flag\")    \r\n *                                          3.疑问状态（与普通状态无异，可左键翻开）( class=\"open question\")    \r\n * \r\n *  翻开状态（都不再允许点击）(status)：       4.无任何内容 ( class=\"open\")        \r\n *                                           5.数字状态 ( class=\"open\")       \r\n *                                           6.雷( class=\"open el-icon-sunny\")\r\n * \r\n *      \r\n *                            isBomb:       是否是炸弹格子，默认false          \r\n * \r\n *    {\r\n *       'x,y': { status: 1,  isBomb: false }\r\n *    }\r\n * \r\n * ***/\r\n\r\nexport default {\r\n    data(){\r\n        return {\r\n            width: 28,//格子的宽度\r\n\r\n            sweepData: {},//所有的格子数据对象\r\n\r\n            row: 10, //几行\r\n            col: 15, //几列\r\n            count: 10, //雷的数量\r\n        }\r\n    },\r\n    created(){\r\n        this.initGame()\r\n    },\r\n    methods: {\r\n        initGame(){\r\n            var coords = [];//记录所有的的坐标值集合[{x,y}]\r\n            //生成对应格子的数据对象\r\n            for(var y = 0; y < this.row; y++){\r\n                for(var x = 0; x < this.col; x++ ){\r\n                    coords.push({x,y})\r\n                    this.$set(this.sweepData, x+','+y, { status: 1,  isBomb: false })\r\n                }\r\n            }\r\n            \r\n            //生成随机雷的坐标集合\r\n            var bombCoords = this.createBombCoords(this.count, coords);\r\n            \r\n            //将雷状态写入到数据中\r\n            bombCoords.forEach(item =>{\r\n                var x = item.x;\r\n                var y = item.y;\r\n                this.sweepData[x+','+y].isBomb = true;\r\n            });\r\n  \r\n            console.log(this.sweepData)\r\n        },\r\n        createBombCoords(count,coords){\r\n            //生成随机雷的坐标集合\r\n           var randomCoords = []\r\n           for(var i = 0; i < count; i++){\r\n               var randomPos = Math.floor(coords.length * Math.random());\r\n               randomCoords.push(coords.splice(randomPos, 1)[0]);\r\n           }\r\n\r\n           return randomCoords;\r\n        },\r\n        roundData(x,y){\r\n            //获取当前x,y周围8个格子的对象集合\r\n            var arr = []\r\n            for(var xx = x - 1; xx < x + 1; xx++){\r\n                for(var yy = y - 1; yy < y + 1; yy++){\r\n                    if(xx >= 0 && xx < this.col  && yy >=0 && yy < this.row){\r\n                        arr.push({x,y})\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        clickHandle(item,strCoords){\r\n            //点击格子触发的函数\r\n            if(item.isBomb){\r\n                item.status = 6;\r\n                this.$alert('踩到雷了，输了！', {\r\n                    confirmButtonText: '确定'\r\n                });\r\n                return\r\n            }\r\n            else{\r\n                //正常未踩到雷\r\n                var coords = strCoords.split(',');//字符串转为数组\r\n                var x = Number(coords[0]);\r\n                var y = Number(coords[1]);\r\n                this.roundData(x,y);\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scope>\r\n.sweep{\r\n    .sweep-content{\r\n        display: flex;\r\n        justify-content: center;\r\n        margin-top: 20px;\r\n        ul{\r\n            display: flex;\r\n            flex-flow: wrap; //默认弹性盒子不换行，添加此属性内容宽度超出自动换行\r\n            li{\r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: center;\r\n                box-sizing: border-box;\r\n                width: 28px;\r\n                height: 28px;\r\n                border: 1px solid #000;\r\n                list-style: none;\r\n                background: #4d65cb;\r\n                box-shadow: 1px 3px 14px 3px #0000006e;\r\n                &.open{\r\n                    color: #4251be;\r\n                    background: #cad7ea;\r\n                    font-weight: bold;\r\n                }\r\n                &.el-icon-sunny{\r\n                    color: #656977;\r\n                    font-weight: bold;\r\n                }\r\n                &.el-icon-s-flag{\r\n                    color: #d21313;\r\n                }\r\n                &.question{\r\n                    &:after{\r\n                        content: '?';\r\n                        font-size: 20px;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    .sweep-operator{\r\n        margin-top: 20px;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        .sweep-icon{\r\n            font-size: 30px;\r\n            margin-left: 10px;\r\n        }\r\n    }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}